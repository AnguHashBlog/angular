import{a as R}from"./chunk-NZCH6BLE.js";import{$ as f,C as g,G as v,Ga as k,H as c,O as h,P as m,Qa as A,S as M,T as O,U as w,V as x,W as s,X as a,Y as S,Z as _,_ as l,ca as C,da as b,ka as y,la as I,oa as L,q as u,u as p,v as d,wa as T}from"./chunk-U4FS7TVV.js";function V(n,e){if(n&1){let i=_();s(0,"a",3),l("click",function(){let r=p(i).$implicit,P=f();return d(P.navigateToPost(r.slug))}),s(1,"div",4),S(2,"img",5),a(),s(3,"div",6)(4,"h3"),C(5),I(6,"slice"),a()()()}if(n&2){let i=e.$implicit;c(2),m("src",i.coverImage.url,v),c(3),b(i.title.length>90?L(6,2,i.title,0,90)+"...":i.title)}}function E(n,e){if(n&1){let i=_();s(0,"div",7)(1,"button",8),l("click",function(){p(i);let o=f();return d(o.loadMorePosts())}),C(2,"Load more"),a()()}}var q=(()=>{let e=class e{constructor(){this.blogService=g(A),this.paginationInfo={hasNextPage:!0,endCursor:""},this.isHiddenLoadMore=!0,this.isActiveInfiniteScroll=!1,this.router=g(k)}ngOnInit(){this.blogURL=this.blogService.getBlogURL(),this.loadPosts()}navigateToPost(t){this.router.navigate(["/post",t])}loadPosts(){this.blogService.getPosts(this.blogURL,this.paginationInfo.endCursor).subscribe(t=>{this.paginationInfo=t.pagination,this.isHiddenLoadMore=!t.pagination.hasNextPage,this.posts=t.posts})}loadMorePosts(){this.paginationInfo.hasNextPage&&(this.isHiddenLoadMore=!0,this.blogService.getPosts(this.blogURL,this.paginationInfo.endCursor).pipe().subscribe(t=>{this.isActiveInfiniteScroll=!0,this.paginationInfo=t.pagination,this.posts=this.posts.concat(t.posts)}))}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=u({type:e,selectors:[["app-posts"]],standalone:!0,features:[y],decls:5,vars:2,consts:[["infiniteScroll","",1,"posts-view",3,"isActiveInfiniteScroll","scrolled"],[1,"cards-wrapper","grid"],["class","load-more-posts"],[1,"card",3,"click"],[1,"card-image"],[3,"src"],[1,"card-title"],[1,"load-more-posts"],[3,"click"],["class","card"]],template:function(o,r){o&1&&(s(0,"div",0),l("scrolled",function(){return r.loadMorePosts()}),s(1,"div",1),w(2,V,7,6,"a",9,O),a(),h(4,E,3,0,"div",2),a()),o&2&&(m("isActiveInfiniteScroll",r.isActiveInfiniteScroll),c(2),x(r.posts),c(2),M(4,r.paginationInfo.hasNextPage&&!r.isHiddenLoadMore?4:-1))},dependencies:[R,T],styles:[".posts-view[_ngcontent-%COMP%]{width:70vw;min-height:67.2vh;padding:.5rem 0;margin-bottom:2rem}.posts-view[_ngcontent-%COMP%]   .layout-control[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.posts-view[_ngcontent-%COMP%]   .cards-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin:2rem 1rem 1rem}.posts-view[_ngcontent-%COMP%]   .cards-wrapper.grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:all .3s ease-in-out}.posts-view[_ngcontent-%COMP%]   .cards-wrapper.list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;width:70%}.posts-view[_ngcontent-%COMP%]   .cards-wrapper.list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:1rem 0 0 1rem}.posts-view[_ngcontent-%COMP%]   .cards-wrapper.list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{height:4rem;border-radius:0}.posts-view[_ngcontent-%COMP%]   .cards-wrapper.list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-brief[_ngcontent-%COMP%]{padding-bottom:1rem}.posts-view[_ngcontent-%COMP%]   .load-more-posts[_ngcontent-%COMP%]{display:flex;justify-content:center}.posts-view[_ngcontent-%COMP%]   .load-more-posts[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem;text-transform:uppercase}"]});let n=e;return n})();export{q as PostsComponent};
